---

:backends: yaml

:yaml:
  :datadir: "/"

# Hiera lookiup
# 
# Some lookup values are set inside previous hiera files:
#
# role - Role should be set in clientcert
:hierarchy:
  - "etc/puppetlabs/code/environments/%{environment}/hieradata/clientcert/%{::clientcert}"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/clientcert/%{::clientcert}"
  - "vagrant/puppet/hiera/%{::environment}/clientcert/%{::clientcert}"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/domain/%{::domain}"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/domain/%{::domain}"
  - "vagrant/puppet/hiera/%{::environment}/domain/%{::domain}"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/environment/%{::environment}"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/environment/%{::environment}"
  - "vagrant/puppet/hiera/%{::environment}/environment/%{::environment}"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/os/%{::osfamily}/%{::operatingsystem}/%{::operatingsystemmajrelease}"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/os/%{::osfamily}/%{::operatingsystem}/%{::operatingsystemmajrelease}"
  - "vagrant/puppet/hiera/%{::environment}/os/%{::osfamily}/%{::operatingsystem}/%{::operatingsystemmajrelease}"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/tier/%{::tier}"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/tier/%{::tier}"
  - "vagrant/puppet/hiera/%{::environment}/tier/%{::tier}"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/role/%{::role}/%{::role_group}"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/role/%{::role}/%{::role_group}"
  - "vagrant/puppet/hiera/%{::environment}/role/%{::role}/%{::role_group}"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/role/application/%{::application}"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/role/application/%{::application}"
  - "vagrant/puppet/hiera/%{::environment}/role/application/%{::application}"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/role/%{::role}"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/role/%{::role}"
  - "vagrant/puppet/hiera/%{::environment}/role/%{::role}"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/defaults"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/defaults"
  - "vagrant/puppet/hiera/%{::environment}/defaults"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/role/%{hiera('role')}"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/role/%{hiera('role')}"
  - "vagrant/puppet/hiera/%{::environment}/role/%{hiera('role')}"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/global"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/global"
  - "vagrant/puppet/hiera/%{::environment}/global"

  - "etc/puppetlabs/code/environments/%{environment}/hieradata/common"
  - "etc/puppetlabs/puppet/hiera/hiera_%{::environment}/common"
  - "vagrant/puppet/hiera/%{::environment}/common"
